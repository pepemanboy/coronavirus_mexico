{"version":3,"sources":["App.js","index.js"],"names":["App","start_date","Date","confirmed_url","deaths_url","recovered_url","useState","labels","series","datasets","plotData","setPlotData","getData","url","a","fetch","response","reader","body","getReader","read","result","decoder","TextDecoder","csv","decode","value","results","Papa","parse","header","rows","data","mexico","find","val","idx","mexico_data","key","match","date","date_str","getDate","getMonth","push","parseInt","confirmed_data","deaths_data","recovered_data","label","fill","borderColor","useEffect","getAllData","className","Container","href","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"qQA6FeA,MArFf,WACE,IAAMC,EAAa,IAAIC,KAAK,aAEtBC,EAAgB,mJAChBC,EAAa,gJACbC,EAAgB,mJALT,EAOaC,mBAAS,MAPtB,gCASeA,mBAAS,CAACC,OAAO,GAAIC,OAAO,MAT3C,gCAUmBF,mBAAS,CAACC,OAAO,GAAIE,SAAU,MAVlD,mBAUNC,EAVM,KAUIC,EAVJ,cAYEC,EAZF,8EAYb,WAAuBC,GAAvB,qCAAAC,EAAA,sEACyBC,MAAMF,GAD/B,cACQG,EADR,OAEQC,EAASD,EAASE,KAAKC,YAF/B,SAGuBF,EAAOG,OAH9B,OAGQC,EAHR,OAIQC,EAAU,IAAIC,YAAY,SAC1BC,EAAMF,EAAQG,OAAOJ,EAAOK,OAC5BC,EAAUC,IAAKC,MAAML,EAAK,CAACM,QAAQ,IACnCC,EAAOJ,EAAQK,KACfC,EAASF,EAAKG,MAAK,SAACC,EAAKC,GAAS,MAAiC,WAA1BD,EAAI,qBAC7CE,EAAc,CAAC9B,OAAO,GAAIyB,KAAM,IATxC,OAAAlB,EAAA,KAUoBmB,GAVpB,oDAUaK,EAVb,YAWYC,MAAM,mBAXlB,uBAYYC,EAAO,IAAItC,KAAKoC,IACXrC,GAbjB,wDAcYwC,EAAWD,EAAKE,UAAY,KAAQF,EAAKG,WAAa,GAC5DN,EAAY9B,OAAOqC,KAAKH,GACxBJ,EAAYL,KAAKY,KAAKC,SAASZ,EAAOK,KAhB5C,yDAmBSD,GAnBT,6CAZa,kEAkCb,oCAAAvB,EAAA,sEAC+BF,EAAQT,GADvC,cACQ2C,EADR,gBAE4BlC,EAAQR,GAFpC,cAEQ2C,EAFR,gBAG+BnC,EAAQP,GAHvC,OAGQ2C,EAHR,OAKQzC,EAASuC,EAAevC,OAExByB,EAAO,CACXzB,OAAQA,EACRE,SAAU,CACR,CACEwC,MAAO,oBACPC,MAAM,EACNC,YAAa,UACbnB,KAAMc,EAAed,MAEvB,CACEiB,MAAO,cACPC,MAAM,EACNC,YAAa,UACbnB,KAAMgB,EAAehB,MAEvB,CACEiB,MAAO,UACPC,MAAM,EACNC,YAAa,UACbnB,KAAMe,EAAYf,QAIxBrB,EAAYqB,GA9Bd,6CAlCa,sBAuEb,OAJAoB,qBAAU,YAnEG,mCAoEXC,KACC,IAGD,yBAAKC,UAAU,OACb,kBAACC,EAAA,EAAD,KACE,wBAAID,UAAU,SAAd,4BACA,kBAAC,IAAD,CAAMtB,KAAMtB,IACZ,yBAAK4C,UAAU,UACb,qFAAuD,uBAAGE,KAAK,gCAAR,wDAAvD,KACA,+CAAiB,uBAAGA,KAAK,gEAAR,UAAjB,SClFVC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFC,SAASC,eAAe,U","file":"static/js/main.f974282b.chunk.js","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport Papa from 'papaparse'\nimport {Line} from 'react-chartjs-2';\nimport Container from 'react-bootstrap/Container'\nimport './App.css'\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nfunction App() {\n  const start_date = new Date(\"2/26/2020\");\n\n  const confirmed_url = \"https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_19-covid-Confirmed.csv\"\n  const deaths_url = \"https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_19-covid-Deaths.csv\";\n  const recovered_url = \"https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_19-covid-Recovered.csv\";\n\n  const [error, setError] = useState(\"Ok\");\n\n  const [series, setSeries] = useState({labels:[], series:[]});\n  const [plotData, setPlotData] = useState({labels:[], datasets: []});\n\n  async function getData(url) {\n    const response = await fetch(url);\n    const reader = response.body.getReader();\n    const result = await reader.read();\n    const decoder = new TextDecoder('utf-8');\n    const csv = decoder.decode(result.value);\n    const results = Papa.parse(csv, {header: true});\n    const rows = results.data;\n    const mexico = rows.find((val, idx) => {return val[\"Country/Region\"] === \"Mexico\"})\n    const mexico_data = {labels:[], data: []};\n    for (const key in mexico) {\n      if (key.match(/\\d*\\/\\d*\\/\\d*/ig)) {\n        const date = new Date(key);\n        if (date < start_date) continue;\n        const date_str = date.getDate() + \"/\" +  (date.getMonth() + 1);\n        mexico_data.labels.push(date_str);\n        mexico_data.data.push(parseInt(mexico[key]));\n      }\n    }\n    return mexico_data;\n  }\n\n  async function getAllData() {\n    const confirmed_data = await getData(confirmed_url);\n    const deaths_data = await getData(deaths_url);\n    const recovered_data = await getData(recovered_url);\n\n    const labels = confirmed_data.labels;\n\n    const data = {\n      labels: labels,\n      datasets: [\n        {\n          label: 'Casos confirmados',\n          fill: false,\n          borderColor: '#17579B',\n          data: confirmed_data.data,\n        },\n        {\n          label: 'Recuperados',\n          fill: false,\n          borderColor: '#67A3D2',\n          data: recovered_data.data,\n        },\n        {\n          label: 'Muertes',\n          fill: false,\n          borderColor: '#363537',\n          data: deaths_data.data,\n        },\n      ]\n    };\n    setPlotData(data);\n  }\n\n  useEffect(()=> {\n    getAllData();\n  }, []);\n\n  return (\n    <div className=\"App\">\n      <Container>\n        <h1 className=\"title\">Coronavirus en México</h1>\n        <Line data={plotData}/>\n        <div className=\"footer\">\n          <p>Actualizado automáticamente cada 24 horas gracias a <a href=\"https://coronavirus.jhu.edu/\">Johns Hopkins University Coronavirus Resource Center</a>.</p>\n          <p>Conoce más en <a href=\"https://github.com/pepemanboy/coronavirus_mexico/tree/master\">Github</a>.</p>\n        </div>\n      </Container>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}